<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Play frameworkæºç è§£æ Part1: Play framework ä»‹ç»ã€é¡¹ç›®æ„æˆåŠå¯åŠ¨è„šæœ¬è§£æ Â· 404 NOT FOUND
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="description" content="æ³¨ï¼šæœ¬ç³»åˆ—æ–‡ç« æ‰€ç”¨playç‰ˆæœ¬ä¸º1.2.6
ä»‹ç» Link to heading Play frameworkæ˜¯ä¸ªè½»é‡çº§çš„RESTfulæ¡†æ¶ï¼Œè‡´åŠ›äºè®©javaç¨‹åºå‘˜å®ç°å¿«é€Ÿé«˜æ•ˆå¼€å‘ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„ä¼˜åŠ¿ï¼š
çƒ­åŠ è½½ã€‚åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä¿®æ”¹ä¼šåŠæ—¶ç”Ÿæ•ˆã€‚ æŠ›å¼ƒxmlé…ç½®æ–‡ä»¶ã€‚çº¦å®šå¤§äºé…ç½®ã€‚ æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ æ— çŠ¶æ€mvcæ¡†æ¶ï¼Œæ‹“å±•æ€§è‰¯å¥½ ç®€å•çš„è·¯ç”±è®¾ç½® è¿™é‡Œé™„ä¸ŠPlay frameworkçš„æ–‡æ¡£åœ°å€ï¼Œå®˜æ–¹æœ‰æ›´ä¸ºè¯¦å°½çš„åŠŸèƒ½å™è¿°ã€‚Play frameworkæ–‡æ¡£
é¡¹ç›®æ„æˆ Link to heading play frameworkçš„åˆå§‹åŒ–éå¸¸ç®€å•ï¼Œåªè¦ä¸‹è½½äº†playçš„è½¯ä»¶åŒ…åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œplay new xxxå³å¯åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚ è‡ªåŠ¨ç”Ÿæˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š
è¿è¡Œplayç¨‹åºä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨
play run å³å¯è¿è¡Œã€‚
å¯åŠ¨è„šæœ¬è§£æ Link to heading play frameworkè½¯ä»¶åŒ…ç›®å½• Link to heading ä¸ºäº†æ›´å¥½çš„äº†è§£play frameworkçš„è¿ä½œåŸç†ï¼Œæˆ‘ä»¬æ¥ä»play frameworkçš„å¯åŠ¨è„šæœ¬å¼€å§‹åˆ†æï¼Œåˆ†æå¯åŠ¨è„šæœ¬æœ‰åŠ©äºæˆ‘ä»¬äº†è§£play frameworkçš„è¿è¡Œè¿‡ç¨‹ã€‚
playçš„å¯åŠ¨è„šæœ¬æ˜¯ä½¿ç”¨pythonç¼–å†™çš„ï¼Œè„šæœ¬çš„å…¥å£ä¸ºplayè½¯ä»¶åŒ…æ ¹ç›®å½•ä¸‹çš„playæ–‡ä»¶,ä¸‹é¢æˆ‘ä»¬å°†ä»playè¿™ä¸ªè„šæœ¬çš„ä¸»å…¥å£å¼€å§‹åˆ†æã€‚
playè„šæœ¬è§£æ Link to heading playè„šæœ¬åœ¨å¼€å¤´å¼•å…¥äº†3ä¸ªç±»ï¼Œåˆ†åˆ«ä¸ºplay.cmdloader,play.application,play.utilsï¼Œä»æ·»åŠ çš„ç³»ç»Ÿå‚æ•°ä¸­å¯ä»¥çœ‹å‡ºplayå¯åŠ¨è„šæœ¬çš„å­˜æ”¾è·¯å¾„ä¸º framework/pym cmdloader.pyçš„ä¸»è¦ä½œç”¨ä¸ºåŠ è½½framework/pym/commandsä¸‹çš„å„ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºä¹‹åå¯¹å‘½ä»¤å‚æ•°çš„è§£é‡Šè¿è¡Œ application.pyçš„ä¸»è¦ä½œç”¨ä¸ºè§£æé¡¹ç›®è·¯å¾„ä¸‹conf/ä¸­çš„é…ç½®æ–‡ä»¶ã€åŠ è½½æ¨¡å—ã€æ‹¼æ¥æœ€åè¿è¡Œçš„javaå‘½ä»¤
sys.path.append(os.path.join(os.path.dirname(os.path.realpath(sys.argv[0])), &#39;framework&#39;, &#39;pym&#39;)) from play.cmdloader import CommandLoader from play.application import PlayApplication from play.utils import * åœ¨è„šæœ¬çš„å¼€å¤´ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œæ„å‘³ç€åªè¦åœ¨playä¸»ç¨‹åºæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºidçš„æ–‡ä»¶ï¼Œå³å¯è®¾ç½®é»˜è®¤çš„æ¡†æ¶id
play_env[&#34;id_file&#34;] = os.path.join(play_env[&#39;basedir&#39;], &#39;id&#39;) if os.">
<meta name="keywords" content="">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Play frameworkæºç è§£æ Part1: Play framework ä»‹ç»ã€é¡¹ç›®æ„æˆåŠå¯åŠ¨è„šæœ¬è§£æ">
  <meta name="twitter:description" content="æ³¨ï¼šæœ¬ç³»åˆ—æ–‡ç« æ‰€ç”¨playç‰ˆæœ¬ä¸º1.2.6
ä»‹ç» Link to heading Play frameworkæ˜¯ä¸ªè½»é‡çº§çš„RESTfulæ¡†æ¶ï¼Œè‡´åŠ›äºè®©javaç¨‹åºå‘˜å®ç°å¿«é€Ÿé«˜æ•ˆå¼€å‘ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„ä¼˜åŠ¿ï¼š
çƒ­åŠ è½½ã€‚åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä¿®æ”¹ä¼šåŠæ—¶ç”Ÿæ•ˆã€‚ æŠ›å¼ƒxmlé…ç½®æ–‡ä»¶ã€‚çº¦å®šå¤§äºé…ç½®ã€‚ æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ æ— çŠ¶æ€mvcæ¡†æ¶ï¼Œæ‹“å±•æ€§è‰¯å¥½ ç®€å•çš„è·¯ç”±è®¾ç½® è¿™é‡Œé™„ä¸ŠPlay frameworkçš„æ–‡æ¡£åœ°å€ï¼Œå®˜æ–¹æœ‰æ›´ä¸ºè¯¦å°½çš„åŠŸèƒ½å™è¿°ã€‚Play frameworkæ–‡æ¡£
é¡¹ç›®æ„æˆ Link to heading play frameworkçš„åˆå§‹åŒ–éå¸¸ç®€å•ï¼Œåªè¦ä¸‹è½½äº†playçš„è½¯ä»¶åŒ…åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œplay new xxxå³å¯åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚ è‡ªåŠ¨ç”Ÿæˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š
è¿è¡Œplayç¨‹åºä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨
play run å³å¯è¿è¡Œã€‚
å¯åŠ¨è„šæœ¬è§£æ Link to heading play frameworkè½¯ä»¶åŒ…ç›®å½• Link to heading ä¸ºäº†æ›´å¥½çš„äº†è§£play frameworkçš„è¿ä½œåŸç†ï¼Œæˆ‘ä»¬æ¥ä»play frameworkçš„å¯åŠ¨è„šæœ¬å¼€å§‹åˆ†æï¼Œåˆ†æå¯åŠ¨è„šæœ¬æœ‰åŠ©äºæˆ‘ä»¬äº†è§£play frameworkçš„è¿è¡Œè¿‡ç¨‹ã€‚
playçš„å¯åŠ¨è„šæœ¬æ˜¯ä½¿ç”¨pythonç¼–å†™çš„ï¼Œè„šæœ¬çš„å…¥å£ä¸ºplayè½¯ä»¶åŒ…æ ¹ç›®å½•ä¸‹çš„playæ–‡ä»¶,ä¸‹é¢æˆ‘ä»¬å°†ä»playè¿™ä¸ªè„šæœ¬çš„ä¸»å…¥å£å¼€å§‹åˆ†æã€‚
playè„šæœ¬è§£æ Link to heading playè„šæœ¬åœ¨å¼€å¤´å¼•å…¥äº†3ä¸ªç±»ï¼Œåˆ†åˆ«ä¸ºplay.cmdloader,play.application,play.utilsï¼Œä»æ·»åŠ çš„ç³»ç»Ÿå‚æ•°ä¸­å¯ä»¥çœ‹å‡ºplayå¯åŠ¨è„šæœ¬çš„å­˜æ”¾è·¯å¾„ä¸º framework/pym cmdloader.pyçš„ä¸»è¦ä½œç”¨ä¸ºåŠ è½½framework/pym/commandsä¸‹çš„å„ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºä¹‹åå¯¹å‘½ä»¤å‚æ•°çš„è§£é‡Šè¿è¡Œ application.pyçš„ä¸»è¦ä½œç”¨ä¸ºè§£æé¡¹ç›®è·¯å¾„ä¸‹conf/ä¸­çš„é…ç½®æ–‡ä»¶ã€åŠ è½½æ¨¡å—ã€æ‹¼æ¥æœ€åè¿è¡Œçš„javaå‘½ä»¤
sys.path.append(os.path.join(os.path.dirname(os.path.realpath(sys.argv[0])), &#39;framework&#39;, &#39;pym&#39;)) from play.cmdloader import CommandLoader from play.application import PlayApplication from play.utils import * åœ¨è„šæœ¬çš„å¼€å¤´ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œæ„å‘³ç€åªè¦åœ¨playä¸»ç¨‹åºæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºidçš„æ–‡ä»¶ï¼Œå³å¯è®¾ç½®é»˜è®¤çš„æ¡†æ¶id
play_env[&#34;id_file&#34;] = os.path.join(play_env[&#39;basedir&#39;], &#39;id&#39;) if os.">

<meta property="og:url" content="http://localhost:1313/posts/play-framework/play-framework-%E4%BB%8B%E7%BB%8D%E9%A1%B9%E7%9B%AE%E6%9E%84%E6%88%90%E5%8F%8A%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%A7%A3%E6%9E%90/">
  <meta property="og:site_name" content="404 NOT FOUND">
  <meta property="og:title" content="Play frameworkæºç è§£æ Part1: Play framework ä»‹ç»ã€é¡¹ç›®æ„æˆåŠå¯åŠ¨è„šæœ¬è§£æ">
  <meta property="og:description" content="æ³¨ï¼šæœ¬ç³»åˆ—æ–‡ç« æ‰€ç”¨playç‰ˆæœ¬ä¸º1.2.6
ä»‹ç» Link to heading Play frameworkæ˜¯ä¸ªè½»é‡çº§çš„RESTfulæ¡†æ¶ï¼Œè‡´åŠ›äºè®©javaç¨‹åºå‘˜å®ç°å¿«é€Ÿé«˜æ•ˆå¼€å‘ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„ä¼˜åŠ¿ï¼š
çƒ­åŠ è½½ã€‚åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä¿®æ”¹ä¼šåŠæ—¶ç”Ÿæ•ˆã€‚ æŠ›å¼ƒxmlé…ç½®æ–‡ä»¶ã€‚çº¦å®šå¤§äºé…ç½®ã€‚ æ”¯æŒå¼‚æ­¥ç¼–ç¨‹ æ— çŠ¶æ€mvcæ¡†æ¶ï¼Œæ‹“å±•æ€§è‰¯å¥½ ç®€å•çš„è·¯ç”±è®¾ç½® è¿™é‡Œé™„ä¸ŠPlay frameworkçš„æ–‡æ¡£åœ°å€ï¼Œå®˜æ–¹æœ‰æ›´ä¸ºè¯¦å°½çš„åŠŸèƒ½å™è¿°ã€‚Play frameworkæ–‡æ¡£
é¡¹ç›®æ„æˆ Link to heading play frameworkçš„åˆå§‹åŒ–éå¸¸ç®€å•ï¼Œåªè¦ä¸‹è½½äº†playçš„è½¯ä»¶åŒ…åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œplay new xxxå³å¯åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚ è‡ªåŠ¨ç”Ÿæˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š
è¿è¡Œplayç¨‹åºä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨
play run å³å¯è¿è¡Œã€‚
å¯åŠ¨è„šæœ¬è§£æ Link to heading play frameworkè½¯ä»¶åŒ…ç›®å½• Link to heading ä¸ºäº†æ›´å¥½çš„äº†è§£play frameworkçš„è¿ä½œåŸç†ï¼Œæˆ‘ä»¬æ¥ä»play frameworkçš„å¯åŠ¨è„šæœ¬å¼€å§‹åˆ†æï¼Œåˆ†æå¯åŠ¨è„šæœ¬æœ‰åŠ©äºæˆ‘ä»¬äº†è§£play frameworkçš„è¿è¡Œè¿‡ç¨‹ã€‚
playçš„å¯åŠ¨è„šæœ¬æ˜¯ä½¿ç”¨pythonç¼–å†™çš„ï¼Œè„šæœ¬çš„å…¥å£ä¸ºplayè½¯ä»¶åŒ…æ ¹ç›®å½•ä¸‹çš„playæ–‡ä»¶,ä¸‹é¢æˆ‘ä»¬å°†ä»playè¿™ä¸ªè„šæœ¬çš„ä¸»å…¥å£å¼€å§‹åˆ†æã€‚
playè„šæœ¬è§£æ Link to heading playè„šæœ¬åœ¨å¼€å¤´å¼•å…¥äº†3ä¸ªç±»ï¼Œåˆ†åˆ«ä¸ºplay.cmdloader,play.application,play.utilsï¼Œä»æ·»åŠ çš„ç³»ç»Ÿå‚æ•°ä¸­å¯ä»¥çœ‹å‡ºplayå¯åŠ¨è„šæœ¬çš„å­˜æ”¾è·¯å¾„ä¸º framework/pym cmdloader.pyçš„ä¸»è¦ä½œç”¨ä¸ºåŠ è½½framework/pym/commandsä¸‹çš„å„ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºä¹‹åå¯¹å‘½ä»¤å‚æ•°çš„è§£é‡Šè¿è¡Œ application.pyçš„ä¸»è¦ä½œç”¨ä¸ºè§£æé¡¹ç›®è·¯å¾„ä¸‹conf/ä¸­çš„é…ç½®æ–‡ä»¶ã€åŠ è½½æ¨¡å—ã€æ‹¼æ¥æœ€åè¿è¡Œçš„javaå‘½ä»¤
sys.path.append(os.path.join(os.path.dirname(os.path.realpath(sys.argv[0])), &#39;framework&#39;, &#39;pym&#39;)) from play.cmdloader import CommandLoader from play.application import PlayApplication from play.utils import * åœ¨è„šæœ¬çš„å¼€å¤´ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œæ„å‘³ç€åªè¦åœ¨playä¸»ç¨‹åºæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºidçš„æ–‡ä»¶ï¼Œå³å¯è®¾ç½®é»˜è®¤çš„æ¡†æ¶id
play_env[&#34;id_file&#34;] = os.path.join(play_env[&#39;basedir&#39;], &#39;id&#39;) if os.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-01-03T13:56:21+00:00">
    <meta property="article:modified_time" content="2018-01-03T13:56:21+00:00">




<link rel="canonical" href="http://localhost:1313/posts/play-framework/play-framework-%E4%BB%8B%E7%BB%8D%E9%A1%B9%E7%9B%AE%E6%9E%84%E6%88%90%E5%8F%8A%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%A7%A3%E6%9E%90/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>




<body class="preload-transitions colorscheme-light">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      404 NOT FOUND
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/play-framework/play-framework-%E4%BB%8B%E7%BB%8D%E9%A1%B9%E7%9B%AE%E6%9E%84%E6%88%90%E5%8F%8A%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%A7%A3%E6%9E%90/">
              Play frameworkæºç è§£æ Part1: Play framework ä»‹ç»ã€é¡¹ç›®æ„æˆåŠå¯åŠ¨è„šæœ¬è§£æ
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2018-01-03T13:56:21Z">
                January 3, 2018
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              6-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <p><font color=#DC143C >æ³¨ï¼šæœ¬ç³»åˆ—æ–‡ç« æ‰€ç”¨playç‰ˆæœ¬ä¸º1.2.6</font></p>
<hr>
<h1 id="ä»‹ç»">
  ä»‹ç»
  <a class="heading-link" href="#%e4%bb%8b%e7%bb%8d">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Play frameworkæ˜¯ä¸ªè½»é‡çº§çš„RESTfulæ¡†æ¶ï¼Œè‡´åŠ›äºè®©javaç¨‹åºå‘˜å®ç°å¿«é€Ÿé«˜æ•ˆå¼€å‘ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li>çƒ­åŠ è½½ã€‚åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰ä¿®æ”¹ä¼šåŠæ—¶ç”Ÿæ•ˆã€‚</li>
<li>æŠ›å¼ƒxmlé…ç½®æ–‡ä»¶ã€‚çº¦å®šå¤§äºé…ç½®ã€‚</li>
<li>æ”¯æŒå¼‚æ­¥ç¼–ç¨‹</li>
<li>æ— çŠ¶æ€mvcæ¡†æ¶ï¼Œæ‹“å±•æ€§è‰¯å¥½</li>
<li>ç®€å•çš„è·¯ç”±è®¾ç½®</li>
</ol>
<p>è¿™é‡Œé™„ä¸ŠPlay frameworkçš„æ–‡æ¡£åœ°å€ï¼Œå®˜æ–¹æœ‰æ›´ä¸ºè¯¦å°½çš„åŠŸèƒ½å™è¿°ã€‚<a href="https://www.playframework.com/documentation/1.2.x/overview" title="æ–‡æ¡£"  class="external-link" target="_blank" rel="noopener">Play frameworkæ–‡æ¡£</a></p>
<hr>
<!-- more -->
<h1 id="é¡¹ç›®æ„æˆ">
  é¡¹ç›®æ„æˆ
  <a class="heading-link" href="#%e9%a1%b9%e7%9b%ae%e6%9e%84%e6%88%90">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>play frameworkçš„åˆå§‹åŒ–éå¸¸ç®€å•ï¼Œåªè¦ä¸‹è½½äº†playçš„è½¯ä»¶åŒ…åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œplay new xxxå³å¯åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚
è‡ªåŠ¨ç”Ÿæˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://i.loli.net/2018/01/08/5a53879bec91f.png" alt="playé¡¹ç›®ç»“æ„"></p>
<p>è¿è¡Œplayç¨‹åºä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>play run
</span></span></code></pre></div><p>å³å¯è¿è¡Œã€‚</p>
<hr>
<h1 id="å¯åŠ¨è„šæœ¬è§£æ">
  å¯åŠ¨è„šæœ¬è§£æ
  <a class="heading-link" href="#%e5%90%af%e5%8a%a8%e8%84%9a%e6%9c%ac%e8%a7%a3%e6%9e%90">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<h2 id="play-frameworkè½¯ä»¶åŒ…ç›®å½•">
  play frameworkè½¯ä»¶åŒ…ç›®å½•
  <a class="heading-link" href="#play-framework%e8%bd%af%e4%bb%b6%e5%8c%85%e7%9b%ae%e5%bd%95">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>ä¸ºäº†æ›´å¥½çš„äº†è§£play frameworkçš„è¿ä½œåŸç†ï¼Œæˆ‘ä»¬æ¥ä»play frameworkçš„å¯åŠ¨è„šæœ¬å¼€å§‹åˆ†æï¼Œåˆ†æå¯åŠ¨è„šæœ¬æœ‰åŠ©äºæˆ‘ä»¬äº†è§£play frameworkçš„è¿è¡Œè¿‡ç¨‹ã€‚</p>
<p>playçš„å¯åŠ¨è„šæœ¬æ˜¯ä½¿ç”¨pythonç¼–å†™çš„ï¼Œè„šæœ¬çš„å…¥å£ä¸ºplayè½¯ä»¶åŒ…æ ¹ç›®å½•ä¸‹çš„playæ–‡ä»¶,ä¸‹é¢æˆ‘ä»¬å°†ä»playè¿™ä¸ªè„šæœ¬çš„ä¸»å…¥å£å¼€å§‹åˆ†æã€‚</p>
<p><img src="https://i.loli.net/2018/01/08/5a5386dfdfdb6.png" alt="playé¡¹ç›®ç»“æ„"></p>
<h2 id="playè„šæœ¬è§£æ">
  playè„šæœ¬è§£æ
  <a class="heading-link" href="#play%e8%84%9a%e6%9c%ac%e8%a7%a3%e6%9e%90">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>playè„šæœ¬åœ¨å¼€å¤´å¼•å…¥äº†3ä¸ªç±»ï¼Œåˆ†åˆ«ä¸ºplay.cmdloader,play.application,play.utilsï¼Œä»æ·»åŠ çš„ç³»ç»Ÿå‚æ•°ä¸­å¯ä»¥çœ‹å‡ºplayå¯åŠ¨è„šæœ¬çš„å­˜æ”¾è·¯å¾„ä¸º framework/pym
cmdloader.pyçš„ä¸»è¦ä½œç”¨ä¸ºåŠ è½½framework/pym/commandsä¸‹çš„å„ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºä¹‹åå¯¹å‘½ä»¤å‚æ•°çš„è§£é‡Šè¿è¡Œ
application.pyçš„ä¸»è¦ä½œç”¨ä¸ºè§£æé¡¹ç›®è·¯å¾„ä¸‹conf/ä¸­çš„é…ç½®æ–‡ä»¶ã€åŠ è½½æ¨¡å—ã€æ‹¼æ¥æœ€åè¿è¡Œçš„javaå‘½ä»¤</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sys<span style="color:#555">.</span>path<span style="color:#555">.</span>append(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(os<span style="color:#555">.</span>path<span style="color:#555">.</span>dirname(os<span style="color:#555">.</span>path<span style="color:#555">.</span>realpath(sys<span style="color:#555">.</span>argv[<span style="color:#f60">0</span>])), <span style="color:#c30">&#39;framework&#39;</span>, <span style="color:#c30">&#39;pym&#39;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">play.cmdloader</span> <span style="color:#069;font-weight:bold">import</span> CommandLoader
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">play.application</span> <span style="color:#069;font-weight:bold">import</span> PlayApplication
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">from</span> <span style="color:#0cf;font-weight:bold">play.utils</span> <span style="color:#069;font-weight:bold">import</span> <span style="color:#555">*</span>
</span></span></code></pre></div><p>åœ¨è„šæœ¬çš„å¼€å¤´ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼Œæ„å‘³ç€åªè¦åœ¨playä¸»ç¨‹åºæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºidçš„æ–‡ä»¶ï¼Œå³å¯è®¾ç½®é»˜è®¤çš„æ¡†æ¶id</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>play_env[<span style="color:#c30">&#34;id_file&#34;</span>] <span style="color:#555">=</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(play_env[<span style="color:#c30">&#39;basedir&#39;</span>], <span style="color:#c30">&#39;id&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>exists(play_env[<span style="color:#c30">&#34;id_file&#34;</span>]):
</span></span><span style="display:flex;"><span>    play_env[<span style="color:#c30">&#34;id&#34;</span>] <span style="color:#555">=</span> <span style="color:#366">open</span>(play_env[<span style="color:#c30">&#34;id_file&#34;</span>])<span style="color:#555">.</span>readline()<span style="color:#555">.</span>strip()
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>    play_env[<span style="color:#c30">&#34;id&#34;</span>] <span style="color:#555">=</span> <span style="color:#c30">&#39;&#39;</span>
</span></span></code></pre></div><p>å‘½ä»¤å‚æ•°çš„åˆ†éš”ç”±ä»¥ä¸‹ä»£ç å®Œæˆï¼Œä¾‹å¦‚ä½¿ç”¨äº†play run &ndash;%test,é‚£ä¹ˆå‚æ•°åˆ—è¡¨å°±æ˜¯</p>
<blockquote>
<p>[&ldquo;xxxx\play&rdquo;,&ldquo;run&rdquo;,&quot;&ndash;%test&quot;]</p>
</blockquote>
<p>è¿™æ®µä»£ç ä¹Ÿè¯´æ˜äº†ï¼Œplayçš„å‘½ä»¤æ ¼å¼ä¸º</p>
<blockquote>
<p>play cmd [app_path] [&ndash;options]</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>application_path <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>
</span></span><span style="display:flex;"><span>remaining_args <span style="color:#555">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(sys<span style="color:#555">.</span>argv) <span style="color:#555">==</span> <span style="color:#f60">1</span>:
</span></span><span style="display:flex;"><span>    application_path <span style="color:#555">=</span> os<span style="color:#555">.</span>getcwd()
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(sys<span style="color:#555">.</span>argv) <span style="color:#555">==</span> <span style="color:#f60">2</span>:
</span></span><span style="display:flex;"><span>    application_path <span style="color:#555">=</span> os<span style="color:#555">.</span>getcwd()
</span></span><span style="display:flex;"><span>    remaining_args <span style="color:#555">=</span> sys<span style="color:#555">.</span>argv[<span style="color:#f60">2</span>:]
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> <span style="color:#366">len</span>(sys<span style="color:#555">.</span>argv) <span style="color:#555">&gt;</span> <span style="color:#f60">2</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> sys<span style="color:#555">.</span>argv[<span style="color:#f60">2</span>]<span style="color:#555">.</span>startswith(<span style="color:#c30">&#39;-&#39;</span>):
</span></span><span style="display:flex;"><span>        application_path <span style="color:#555">=</span> os<span style="color:#555">.</span>getcwd()
</span></span><span style="display:flex;"><span>        remaining_args <span style="color:#555">=</span> sys<span style="color:#555">.</span>argv[<span style="color:#f60">2</span>:]
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span>:
</span></span><span style="display:flex;"><span>        application_path <span style="color:#555">=</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>normpath(os<span style="color:#555">.</span>path<span style="color:#555">.</span>abspath(sys<span style="color:#555">.</span>argv[<span style="color:#f60">2</span>]))
</span></span><span style="display:flex;"><span>        remaining_args <span style="color:#555">=</span> sys<span style="color:#555">.</span>argv[<span style="color:#f60">3</span>:]
</span></span></code></pre></div><p>åœ¨playå‚æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªignoreMissingï¼Œè¿™ä¸ªå‚æ•°çš„å…¨ç§°å…¶å®æ˜¯ignoreMissingModulesï¼Œä½œç”¨å°±æ˜¯åœ¨å½“é…ç½®æ–‡ä»¶ä¸­é…ç½®æœ‰æ¨¡å—ä½†æ˜¯åœ¨playç›®å½•ä¸‹å¹¶æ²¡æœ‰æ‰¾åˆ°æ—¶æ˜¯å¦å¿½ç•¥ï¼Œå¦‚éœ€å¿½ç•¥é‚£ä¹ˆåœ¨å¯åŠ¨æ—¶éœ€è¦åŠ å…¥<code>--force</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ignoreMissing <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> remaining_args<span style="color:#555">.</span>count(<span style="color:#c30">&#39;--force&#39;</span>) <span style="color:#555">==</span> <span style="color:#f60">1</span>:
</span></span><span style="display:flex;"><span>    remaining_args<span style="color:#555">.</span>remove(<span style="color:#c30">&#39;--force&#39;</span>)
</span></span><span style="display:flex;"><span>    ignoreMissing <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">True</span>
</span></span></code></pre></div><p>è„šæœ¬é€šè¿‡</p>
<blockquote>
<p>play_app = PlayApplication(application_path, play_env, ignoreMissing)</p>
</blockquote>
<p>å’Œ</p>
<blockquote>
<p>cmdloader = CommandLoader(play_env[&ldquo;basedir&rdquo;])</p>
</blockquote>
<p>æ¥è¿›è¡ŒPlayApplicationç±»å’ŒCommandLoaderç±»çš„åˆå§‹åŒ–ã€‚
åœ¨PlayApplicationç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå®ƒåˆ›å»ºäº†PlayConfParserç±»ç”¨æ¥è§£æé…ç½®æ–‡ä»¶ï¼Œè¿™ä¹Ÿå°±æ˜¯è¯´playçš„é…ç½®æ–‡ä»¶è§£ææ˜¯åœ¨è„šæœ¬å¯åŠ¨é˜¶æ®µè¿›è¡Œçš„ï¼Œ<strong>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¿®æ”¹é…ç½®æ–‡ä»¶æ— æ³•å®æ—¶ç”Ÿæ•ˆéœ€è¦é‡å¯çš„åŸå› </strong><br>
åœ¨PlayConfParserä¸­æœ‰ä¸€ä¸ªå¸¸é‡DEFAULTSå‚¨å­˜äº†é»˜è®¤çš„httpç«¯å£å’Œjpdaè°ƒè¯•ç«¯å£ï¼Œåˆ†åˆ«ä¸º9000å’Œ8000ï¼Œéœ€è¦æ·»åŠ é»˜è®¤å€¼å¯ä»¥ä¿®æ”¹DEFAULTSï¼ŒDEFAULTSå†…çš„å€¼åªæœ‰å½“é…ç½®æ–‡ä»¶ä¸­æ‰¾ä¸åˆ°æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DEFAULTS <span style="color:#555">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c30">&#39;http.port&#39;</span>: <span style="color:#c30">&#39;9000&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#c30">&#39;jpda.port&#39;</span>: <span style="color:#c30">&#39;8000&#39;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé…ç½®æ–‡ä»¶ä¸­çš„http.portçš„ä¼˜å…ˆçº§æ˜¯å°äºå‘½ä»¤å‚æ•°ä¸­çš„http.portçš„</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">#envä¸ºå‘½ä»¤å‚æ•°</span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> env<span style="color:#555">.</span>has_key(<span style="color:#c30">&#39;http.port&#39;</span>):
</span></span><span style="display:flex;"><span>    self<span style="color:#555">.</span>entries[<span style="color:#c30">&#39;http.port&#39;</span>] <span style="color:#555">=</span> env[<span style="color:#c30">&#39;http.port&#39;</span>]
</span></span></code></pre></div><p>CommandLoaderç±»çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå°±æ˜¯éå†framework/pym/commandsä¸‹çš„.pyæ–‡ä»¶ï¼Œä¾æ¬¡åŠ è½½ç„¶åè¯»å–ä»–çš„å…¨å±€å˜é‡COMMANDSå’ŒMODULEå‚¨å­˜ç”¨äºä¹‹åçš„å‘½ä»¤å¤„ç†å’Œæ¨¡å—åŠ è½½ã€‚</p>
<p>å›åˆ°playè„šæœ¬ä¸­ï¼Œåœ¨PlayApplicationç±»å’ŒCommandLoaderç±»åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œplayè¿›è¡Œ&quot;&ndash;deps&quot;å‚æ•°çš„æ£€æŸ¥ï¼Œå¦‚æœå­˜åœ¨&ndash;depsï¼Œåˆ™è°ƒç”¨play.deps.DependenciesManagerç±»æ¥è¿›è¡Œä¾èµ–çš„æ£€æŸ¥ã€æ›´æ–°ã€‚DependenciesManagerçš„è§£æå°†æ”¾åˆ°åè¯è¯¦è§£ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> remaining_args<span style="color:#555">.</span>count(<span style="color:#c30">&#39;--deps&#39;</span>) <span style="color:#555">==</span> <span style="color:#f60">1</span>:
</span></span><span style="display:flex;"><span>    cmdloader<span style="color:#555">.</span>commands[<span style="color:#c30">&#39;dependencies&#39;</span>]<span style="color:#555">.</span>execute(command<span style="color:#555">=</span><span style="color:#c30">&#39;dependencies&#39;</span>, app<span style="color:#555">=</span>play_app, args<span style="color:#555">=</span>[<span style="color:#c30">&#39;--sync&#39;</span>], env<span style="color:#555">=</span>play_env, cmdloader<span style="color:#555">=</span>cmdloader)
</span></span><span style="display:flex;"><span>    remaining_args<span style="color:#555">.</span>remove(<span style="color:#c30">&#39;--deps&#39;</span>)
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œplayä¾¿æ­£å¼è¿›è¡Œå¯åŠ¨è¿‡ç¨‹ï¼ŒplayæŒ‰ç…§ä»¥ä¸‹çš„é¡ºåºè¿›è¡ŒåŠ è½½ï¼š</p>
<ol>
<li>åŠ è½½é…ç½®æ–‡ä»¶ä¸­è®°å½•çš„æ¨¡å—çš„å‘½ä»¤ä¿¡æ¯</li>
<li>åŠ è½½å‚æ•°ä¸­æŒ‡å®šçš„æ¨¡å—çš„å‘½ä»¤ä¿¡æ¯</li>
<li>è¿è¡Œå„æ¨¡å—ä¸­çš„beforeå‡½æ•°</li>
<li>æ‰§è¡Œplay_command,play_commandå³ä¸ºrun,test,warç­‰playéœ€è¦çš„æ‰§è¡Œçš„å‘½ä»¤</li>
<li>è¿è¡Œå„æ¨¡å—ä¸­çš„afterå‡½æ•°</li>
<li>ç»“æŸè„šæœ¬</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> play_command <span style="color:#000;font-weight:bold">in</span> cmdloader<span style="color:#555">.</span>commands:
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> name <span style="color:#000;font-weight:bold">in</span> cmdloader<span style="color:#555">.</span>modules:
</span></span><span style="display:flex;"><span>        module <span style="color:#555">=</span> cmdloader<span style="color:#555">.</span>modules[name]
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;before&#39;</span> <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">dir</span>(module):
</span></span><span style="display:flex;"><span>            module<span style="color:#555">.</span>before(command<span style="color:#555">=</span>play_command, app<span style="color:#555">=</span>play_app, args<span style="color:#555">=</span>remaining_args, env<span style="color:#555">=</span>play_env)
</span></span><span style="display:flex;"><span>    status <span style="color:#555">=</span> cmdloader<span style="color:#555">.</span>commands[play_command]<span style="color:#555">.</span>execute(command<span style="color:#555">=</span>play_command, app<span style="color:#555">=</span>play_app, args<span style="color:#555">=</span>remaining_args, env<span style="color:#555">=</span>play_env, cmdloader<span style="color:#555">=</span>cmdloader)
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> name <span style="color:#000;font-weight:bold">in</span> cmdloader<span style="color:#555">.</span>modules:
</span></span><span style="display:flex;"><span>        module <span style="color:#555">=</span> cmdloader<span style="color:#555">.</span>modules[name]
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> <span style="color:#c30">&#39;after&#39;</span> <span style="color:#000;font-weight:bold">in</span> <span style="color:#366">dir</span>(module):
</span></span><span style="display:flex;"><span>            module<span style="color:#555">.</span>after(command<span style="color:#555">=</span>play_command, app<span style="color:#555">=</span>play_app, args<span style="color:#555">=</span>remaining_args, env<span style="color:#555">=</span>play_env)
</span></span><span style="display:flex;"><span>    sys<span style="color:#555">.</span>exit(status)
</span></span></code></pre></div><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹playå¸¸ç”¨å‘½ä»¤çš„è¿è¡Œè¿‡ç¨‹&hellip;</p>
<h2 id="playå¸¸ç”¨è¿è¡Œå‘½ä»¤è§£æ">
  Playå¸¸ç”¨è¿è¡Œå‘½ä»¤è§£æ
  <a class="heading-link" href="#play%e5%b8%b8%e7%94%a8%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4%e8%a7%a3%e6%9e%90">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>åœ¨æœ¬èŠ‚çš„ä¸€å¼€å§‹ï¼Œæˆ‘å†³å®šå…ˆæŠŠplayæ‰€æœ‰çš„å¯ç”¨å‘½ä»¤å…ˆåˆ—ä¸¾ä¸€ä¸‹ï¼Œä»¥ä¾¿è¯»è€…å¯ä»¥é€‰æ‹©æ€§é˜…è¯»ã€‚</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤åç§°</th>
<th>å‘½ä»¤æ‰€åœ¨æ–‡ä»¶</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>antify</td>
<td>ant.py</td>
<td>åˆå§‹åŒ–antæ„å»ºå·¥å…·çš„build.xmlæ–‡ä»¶</td>
</tr>
<tr>
<td>run</td>
<td>base.py</td>
<td>è¿è¡Œç¨‹åº</td>
</tr>
<tr>
<td>new</td>
<td>base.py</td>
<td>æ–°å»ºplayåº”ç”¨</td>
</tr>
<tr>
<td>clean</td>
<td>base.py</td>
<td>åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œå³æ¸…ç©ºtmpæ–‡ä»¶å¤¹</td>
</tr>
<tr>
<td>test</td>
<td>base.py</td>
<td>è¿è¡Œæµ‹è¯•ç¨‹åº</td>
</tr>
<tr>
<td>autotestã€auto-test</td>
<td>base.py</td>
<td>è‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•é¡¹ç›®</td>
</tr>
<tr>
<td>id</td>
<td>base.py</td>
<td>è®¾ç½®é¡¹ç›®id</td>
</tr>
<tr>
<td>new,run</td>
<td>base.py</td>
<td>æ–°å»ºplayåº”ç”¨å¹¶å¯åŠ¨</td>
</tr>
<tr>
<td>clean,run</td>
<td>base.py</td>
<td>åˆ é™¤ä¸´æ—¶æ–‡ä»¶å¹¶è¿è¡Œ</td>
</tr>
<tr>
<td>modules</td>
<td>base.py</td>
<td>æ˜¾ç¤ºé¡¹ç›®ç”¨åˆ°çš„æ¨¡å—ï¼Œæ³¨ï¼šè¿™é‡Œæ˜¾ç¤ºçš„æ¨¡å—åªæ˜¯åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­å¼•ç”¨çš„æ¨¡å—ï¼Œå‘½ä»¤å‚æ•°ä¸­æ·»åŠ çš„æ¨¡å—ä¸ä¼šæ˜¾ç¤º</td>
</tr>
<tr>
<td>check</td>
<td>check.py</td>
<td>æ£€æŸ¥playæ›´æ–°</td>
</tr>
<tr>
<td>classpathã€cp</td>
<td>classpath.py</td>
<td>æ˜¾ç¤ºåº”ç”¨çš„classpath</td>
</tr>
<tr>
<td>start</td>
<td>daemon.py</td>
<td>åœ¨åå°è¿è¡Œplayç¨‹åº</td>
</tr>
<tr>
<td>stop</td>
<td>daemon.py</td>
<td>åœæ­¢æ­£åœ¨è¿è¡Œçš„ç¨‹åº</td>
</tr>
<tr>
<td>restart</td>
<td>daemon.py</td>
<td>é‡å¯æ­£åœ¨è¿è¡Œçš„ç¨‹åº</td>
</tr>
<tr>
<td>pid</td>
<td>daemon.py</td>
<td>æ˜¾ç¤ºè¿è¡Œä¸­çš„ç¨‹åºçš„pid</td>
</tr>
<tr>
<td>out</td>
<td>daemon.py</td>
<td>æ˜¾ç¤ºè¾“å‡º</td>
</tr>
<tr>
<td>dependenciesã€deps</td>
<td>deps.py</td>
<td>è¿è¡ŒDependenciesManageræ›´æ–°ä¾èµ–</td>
</tr>
<tr>
<td>eclipsifyã€ec</td>
<td>eclipse.py</td>
<td>åˆ›å»ºeclipseé…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>evolutions</td>
<td>evolutions.py</td>
<td>è¿è¡Œplay.db.Evolutionsè¿›è¡Œæ•°æ®åº“æ¼”å˜æ£€æŸ¥</td>
</tr>
<tr>
<td>help</td>
<td>help.py</td>
<td>è¾“å‡ºæ‰€æœ‰playçš„å¯ç”¨å‘½ä»¤</td>
</tr>
<tr>
<td>idealizeã€idea</td>
<td>intellij.py</td>
<td>ç”Ÿæˆideaé…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>javadoc</td>
<td>javadoc.py</td>
<td>ç”Ÿæˆjavadoc</td>
</tr>
<tr>
<td>new-moduleã€nm</td>
<td>modulesrepo.py</td>
<td>åˆ›å»ºæ–°æ¨¡å—</td>
</tr>
<tr>
<td>list-modulesã€lm</td>
<td>modulesrepo.py</td>
<td>æ˜¾ç¤ºplayç¤¾åŒºä¸­çš„æ¨¡å—</td>
</tr>
<tr>
<td>build-moduleã€bm</td>
<td>modulesrepo.py</td>
<td>æ‰“åŒ…æ¨¡å—</td>
</tr>
<tr>
<td>add</td>
<td>modulesrepo.py</td>
<td>å°†æ¨¡å—æ·»åŠ è‡³é¡¹ç›®</td>
</tr>
<tr>
<td>install</td>
<td>modulesrepo.py</td>
<td>å®‰è£…æ¨¡å—</td>
</tr>
<tr>
<td>netbeansify</td>
<td>netbeans.py</td>
<td>ç”Ÿæˆnetbeansé…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>precompile</td>
<td>precompile.py</td>
<td>é¢„ç¼–è¯‘</td>
</tr>
<tr>
<td>secret</td>
<td>secret.py</td>
<td>ç”Ÿæˆsecret key</td>
</tr>
<tr>
<td>status</td>
<td>status.py</td>
<td>æ˜¾ç¤ºè¿è¡Œä¸­é¡¹ç›®çš„çŠ¶æ€</td>
</tr>
<tr>
<td>version</td>
<td>version.py</td>
<td>æ˜¾ç¤ºplay frameworkçš„ç‰ˆæœ¬å·</td>
</tr>
<tr>
<td>war</td>
<td>war.py</td>
<td>å°†é¡¹ç›®æ‰“åŒ…ä¸ºwaræ–‡ä»¶</td>
</tr>
</tbody>
</table>
<h3 id="runä¸start">
  runä¸start
  <a class="heading-link" href="#run%e4%b8%8estart">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>runåº”è¯¥æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„å‘½ä»¤äº†ï¼Œrunå‘½ä»¤çš„ä½œç”¨å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æ ¹æ®å‘½ä»¤å‚æ•°æ‹¼æ¥javaå‚æ•°ï¼Œç„¶åè°ƒç”¨javaæ¥è¿è¡Œplay.server.Serverï¼Œrunå‡½æ•°çš„ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">run</span>(app, args):
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#appå³ä¸ºplayè„šæœ¬ä¸­åˆ›å»ºçš„PlayApplicationç±»</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">global</span> process
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è¿™é‡Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨conf/routeså’Œconf/application.conf</span>
</span></span><span style="display:flex;"><span>    app<span style="color:#555">.</span>check()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#366">print</span> <span style="color:#c30">&#34;~ Ctrl+C to stop&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#366">print</span> <span style="color:#c30">&#34;~ &#34;</span>
</span></span><span style="display:flex;"><span>    java_cmd <span style="color:#555">=</span> app<span style="color:#555">.</span>java_cmd(args)
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>        process <span style="color:#555">=</span> subprocess<span style="color:#555">.</span>Popen (java_cmd, env<span style="color:#555">=</span>os<span style="color:#555">.</span>environ)
</span></span><span style="display:flex;"><span>        signal<span style="color:#555">.</span>signal(signal<span style="color:#555">.</span>SIGTERM, handle_sigterm)
</span></span><span style="display:flex;"><span>        return_code <span style="color:#555">=</span> process<span style="color:#555">.</span>wait()
</span></span><span style="display:flex;"><span>    signal<span style="color:#555">.</span>signal(signal<span style="color:#555">.</span>SIGINT, handle_sigint)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> <span style="color:#f60">0</span> <span style="color:#555">!=</span> return_code:
</span></span><span style="display:flex;"><span>            sys<span style="color:#555">.</span>exit(return_code)
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">OSError</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#366">print</span> <span style="color:#c30">&#34;Could not execute the java executable, please make sure the JAVA_HOME environment variable is set properly (the java executable should reside at JAVA_HOME/bin/java). &#34;</span>
</span></span><span style="display:flex;"><span>        sys<span style="color:#555">.</span>exit(<span style="color:#555">-</span><span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#366">print</span>
</span></span></code></pre></div><p>app.java_cmd(args)çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">def</span> <span style="color:#c0f">java_cmd</span>(self, java_args, cp_args<span style="color:#555">=</span><span style="color:#069;font-weight:bold">None</span>, className<span style="color:#555">=</span><span style="color:#c30">&#39;play.server.Server&#39;</span>, args <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">None</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> args <span style="color:#000;font-weight:bold">is</span> <span style="color:#069;font-weight:bold">None</span>:
</span></span><span style="display:flex;"><span>        args <span style="color:#555">=</span> [<span style="color:#c30">&#39;&#39;</span>]
</span></span><span style="display:flex;"><span>    memory_in_args<span style="color:#555">=</span><span style="color:#069;font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#æ£€æŸ¥javaå‚æ•°ä¸­æ˜¯å¦æœ‰jvmå†…å­˜è®¾ç½®</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> arg <span style="color:#000;font-weight:bold">in</span> java_args:
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> arg<span style="color:#555">.</span>startswith(<span style="color:#c30">&#39;-Xm&#39;</span>):
</span></span><span style="display:flex;"><span>            memory_in_args<span style="color:#555">=</span><span style="color:#069;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#å¦‚æœå‚æ•°ä¸­æ— jvmå†…å­˜è®¾ç½®ï¼Œé‚£ä¹ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾æ˜¯å¦æœ‰jvmå†…å­˜è®¾ç½®ï¼Œè‹¥è¿˜æ˜¯æ²¡æœ‰åˆ™åœ¨ç¯å¢ƒå˜é‡ä¸­æ‰¾æ˜¯å¦æœ‰JAVA_OPTS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è¿™é‡Œå…¶å®æœ‰ä¸ªé—®é¢˜ï¼Œè¿™é‡Œå‡å®šçš„æ˜¯JAVA_OPTSå˜é‡é‡Œåªå­˜äº†jvmå†…å­˜è®¾ç½®ï¼Œå¦‚æœJAVA_OPTSè¿˜å­˜äº†å…¶ä»–é€‰é¡¹ï¼Œé‚£å¯¹è¿è¡Œå¯èƒ½æœ‰å½±å“</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> memory_in_args:
</span></span><span style="display:flex;"><span>        memory <span style="color:#555">=</span> self<span style="color:#555">.</span>readConf(<span style="color:#c30">&#39;jvm.memory&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> memory:
</span></span><span style="display:flex;"><span>            java_args <span style="color:#555">=</span> java_args <span style="color:#555">+</span> memory<span style="color:#555">.</span>split(<span style="color:#c30">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">elif</span> <span style="color:#c30">&#39;JAVA_OPTS&#39;</span> <span style="color:#000;font-weight:bold">in</span> os<span style="color:#555">.</span>environ:
</span></span><span style="display:flex;"><span>            java_args <span style="color:#555">=</span> java_args <span style="color:#555">+</span> os<span style="color:#555">.</span>environ[<span style="color:#c30">&#39;JAVA_OPTS&#39;</span>]<span style="color:#555">.</span>split(<span style="color:#c30">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è·å–ç¨‹åºçš„classpath</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> cp_args <span style="color:#000;font-weight:bold">is</span> <span style="color:#069;font-weight:bold">None</span>:
</span></span><span style="display:flex;"><span>        cp_args <span style="color:#555">=</span> self<span style="color:#555">.</span>cp_args()
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„jpdaç«¯å£</span>
</span></span><span style="display:flex;"><span>    self<span style="color:#555">.</span>jpda_port <span style="color:#555">=</span> self<span style="color:#555">.</span>readConf(<span style="color:#c30">&#39;jpda.port&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„è¿è¡Œæ¨¡å¼</span>
</span></span><span style="display:flex;"><span>    application_mode <span style="color:#555">=</span> self<span style="color:#555">.</span>readConf(<span style="color:#c30">&#39;application.mode&#39;</span>)<span style="color:#555">.</span>lower()
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#å¦‚æœæ¨¡å¼æ˜¯prodï¼Œåˆ™ç”¨serveræ¨¡å¼ç¼–è¯‘</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> application_mode <span style="color:#555">==</span> <span style="color:#c30">&#39;prod&#39;</span>:
</span></span><span style="display:flex;"><span>        java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-server&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic"># JDK 7 compat</span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic"># ä½¿ç”¨æ–°classæ ¡éªŒå™¨ (ä¸çŸ¥é“ä½œç”¨)</span>
</span></span><span style="display:flex;"><span>    java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-XX:-UseSplitVerifier&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#æŸ¥æ‰¾é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦æœ‰javaå®‰å…¨é…ç½®ï¼Œå¦‚æœæœ‰åˆ™åŠ å…¥javaå‚æ•°ä¸­</span>
</span></span><span style="display:flex;"><span>    java_policy <span style="color:#555">=</span> self<span style="color:#555">.</span>readConf(<span style="color:#c30">&#39;java.policy&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> java_policy <span style="color:#555">!=</span> <span style="color:#c30">&#39;&#39;</span>:
</span></span><span style="display:flex;"><span>        policyFile <span style="color:#555">=</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(self<span style="color:#555">.</span>path, <span style="color:#c30">&#39;conf&#39;</span>, java_policy)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>exists(policyFile):
</span></span><span style="display:flex;"><span>            <span style="color:#366">print</span> <span style="color:#c30">&#34;~ using policy file </span><span style="color:#c30;font-weight:bold">\&#34;</span><span style="color:#a00">%s</span><span style="color:#c30;font-weight:bold">\&#34;</span><span style="color:#c30">&#34;</span> <span style="color:#555">%</span> policyFile
</span></span><span style="display:flex;"><span>            java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-Djava.security.manager&#39;</span>)
</span></span><span style="display:flex;"><span>            java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-Djava.security.policy==</span><span style="color:#a00">%s</span><span style="color:#c30">&#39;</span> <span style="color:#555">%</span> policyFile)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#åŠ å…¥httpç«¯å£è®¾ç½®</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>play_env<span style="color:#555">.</span>has_key(<span style="color:#c30">&#39;http.port&#39;</span>):
</span></span><span style="display:flex;"><span>        args <span style="color:#555">+=</span> [<span style="color:#c30">&#34;--http.port=</span><span style="color:#a00">%s</span><span style="color:#c30">&#34;</span> <span style="color:#555">%</span> self<span style="color:#555">.</span>play_env[<span style="color:#c30">&#39;http.port&#39;</span>]]
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#åŠ å…¥httpsç«¯å£è®¾ç½®</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>play_env<span style="color:#555">.</span>has_key(<span style="color:#c30">&#39;https.port&#39;</span>):
</span></span><span style="display:flex;"><span>        args <span style="color:#555">+=</span> [<span style="color:#c30">&#34;--https.port=</span><span style="color:#a00">%s</span><span style="color:#c30">&#34;</span> <span style="color:#555">%</span> self<span style="color:#555">.</span>play_env[<span style="color:#c30">&#39;https.port&#39;</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è®¾ç½®æ–‡ä»¶ç¼–ç </span>
</span></span><span style="display:flex;"><span>    java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-Dfile.encoding=utf-8&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è®¾ç½®ç¼–è¯‘å‘½ä»¤ (è¿™è¾¹ä½¿ç”¨äº†jregex/Pretokenizerç±»çš„nextæ–¹æ³•ï¼Œä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨)</span>
</span></span><span style="display:flex;"><span>    java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-XX:CompileCommand=exclude,jregex/Pretokenizer,next&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#å¦‚æœç¨‹åºæ¨¡å¼åœ¨devï¼Œåˆ™æ·»åŠ jpdaè°ƒè¯•å™¨å‚æ•°</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> self<span style="color:#555">.</span>readConf(<span style="color:#c30">&#39;application.mode&#39;</span>)<span style="color:#555">.</span>lower() <span style="color:#555">==</span> <span style="color:#c30">&#39;dev&#39;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">not</span> self<span style="color:#555">.</span>play_env[<span style="color:#c30">&#34;disable_check_jpda&#34;</span>]: self<span style="color:#555">.</span>check_jpda()
</span></span><span style="display:flex;"><span>        java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-Xdebug&#39;</span>)
</span></span><span style="display:flex;"><span>        java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-Xrunjdwp:transport=dt_socket,address=</span><span style="color:#a00">%s</span><span style="color:#c30">,server=y,suspend=n&#39;</span> <span style="color:#555">%</span> self<span style="color:#555">.</span>jpda_port)
</span></span><span style="display:flex;"><span>        java_args<span style="color:#555">.</span>append(<span style="color:#c30">&#39;-Dplay.debug=yes&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#æ‹¼æ¥javaå‚æ•°</span>
</span></span><span style="display:flex;"><span>    java_cmd <span style="color:#555">=</span> [self<span style="color:#555">.</span>java_path(), <span style="color:#c30">&#39;-javaagent:</span><span style="color:#a00">%s</span><span style="color:#c30">&#39;</span> <span style="color:#555">%</span> self<span style="color:#555">.</span>agent_path()] <span style="color:#555">+</span> java_args <span style="color:#555">+</span> [<span style="color:#c30">&#39;-classpath&#39;</span>, cp_args, <span style="color:#c30">&#39;-Dapplication.path=</span><span style="color:#a00">%s</span><span style="color:#c30">&#39;</span> <span style="color:#555">%</span> self<span style="color:#555">.</span>path, <span style="color:#c30">&#39;-Dplay.id=</span><span style="color:#a00">%s</span><span style="color:#c30">&#39;</span> <span style="color:#555">%</span> self<span style="color:#555">.</span>play_env[<span style="color:#c30">&#34;id&#34;</span>], className] <span style="color:#555">+</span> args
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> java_cmd
</span></span></code></pre></div><p>startå‘½ä»¤ä¸runå‘½ä»¤å¾ˆç±»ä¼¼ï¼Œæ‰§è¡Œæ­¥éª¤ä¸ºï¼š</p>
<ol>
<li>ä¾æ¬¡æŸ¥æ‰¾playå˜é‡pid_fileã€ç³»ç»Ÿç¯å¢ƒå˜é‡PLAY_PID_PATHã€é¡¹ç›®æ ¹ç›®å½•ä¸‹server.pidï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨æŒ‡å®špid</li>
<li>è‹¥ç¬¬ä¸€æ­¥æ‰¾åˆ°pidï¼ŒæŸ¥æ‰¾å½“å‰è¿›ç¨‹åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨æ­¤pidè¿›ç¨‹ï¼Œå­˜åœ¨åˆ™è¯•å›¾å…³é—­è¿›ç¨‹ã€‚(å¦‚æœæ­¤æ—¶pidå·²ç»ä¸æ˜¯playçš„è¿›ç¨‹å‘¢ğŸ˜…)</li>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾application.log.system.outçœ‹æ˜¯å¦å…³é—­äº†ç³»ç»Ÿè¾“å‡º</li>
<li>å¯åŠ¨ç¨‹åºï¼Œè¿™é‡Œä¸runå‘½ä»¤å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ä»–æŒ‡å®šäº†stdoutä½ç½®ï¼Œè¿™æ ·å°±å˜æˆäº†åå°ç¨‹åº</li>
<li>å°†å¯åŠ¨åçš„ç¨‹åºçš„pidå†™å…¥server.pid</li>
</ol>
<p>stopå‘½ä»¤å³å…³é—­å½“å‰è¿›ç¨‹ï¼Œè¿™é‡Œè¦æä¸€ä¸‹ï¼Œplayæœ‰ä¸ªæ³¨è§£å«OnApplicationStopï¼Œå³ä¼šåœ¨ç¨‹åºåœæ­¢æ—¶è§¦å‘ï¼Œè€ŒOnApplicationStopçš„å®ç°ä¸»è¦æ˜¯è°ƒç”¨äº†</p>
<blockquote>
<p>Runtime.getRuntime().addShutdownHook();</p>
</blockquote>
<p>æ¥å®Œæˆ</p>
<h3 id="testä¸autotest">
  testä¸autotest
  <a class="heading-link" href="#test%e4%b8%8eautotest">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>ä½¿ç”¨play testå‘½ä»¤å¯ä»¥è®©ç¨‹åºè¿›å…¥æµ‹è¯•æ¨¡å¼ï¼Œtestå‘½ä»¤å’Œrunå‘½ä»¤å…¶å®å·®åˆ«ä¸å¤§ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±åœ¨äºä½¿ç”¨testå‘½ä»¤æ—¶ï¼Œè„šæœ¬ä¼šå°†play idè‡ªåŠ¨æ›¿æ¢ä¸ºtestï¼Œå½“play idä¸ºtestæ—¶ä¼šè‡ªåŠ¨å¼•å…¥testrunneræ¨¡å—ï¼Œtestrunneræ¨¡å—ä¸»è¦åŠŸèƒ½ä¸ºæ·»åŠ @testsè·¯ç”±å¹¶å®ç°äº†testæµ‹è¯•é¡µé¢ï¼Œä»–çš„å…·ä½“å®ç°è¿‡ç¨‹åç»­å†è°ˆã€‚
autotestå‘½ä»¤çš„ä½œç”¨æ˜¯è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä»–çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨tmpæ–‡ä»¶å¤¹ï¼Œå­˜åœ¨å³åˆ é™¤</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œå¦‚å­˜åœ¨åˆ™å…³é—­ç¨‹åº</li>
<li>æ£€æŸ¥ç¨‹åºæ˜¯å¦é…ç½®äº†sslä½†æ˜¯æ²¡æœ‰æŒ‡å®šè¯ä¹¦</li>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨test-resultæ–‡ä»¶å¤¹ï¼Œå­˜åœ¨å³åˆ é™¤</li>
<li>ä½¿ç”¨testä½œä¸ºidé‡å¯ç¨‹åº</li>
<li>è°ƒç”¨play.modules.testrunner.FirePhoqueæ¥è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•</li>
<li>å…³é—­ç¨‹åº</li>
</ol>
<p>autotestçš„è„šæœ¬çš„æ­¥éª¤1å’Œ2æˆ‘è§‰å¾—æ˜¯æœ‰é—®é¢˜çš„ï¼Œåº”è¯¥æ¢ä¸‹é¡ºåºï¼Œä¸ç„¶å¦‚æœç¨‹åºæ­£åœ¨å‘tmpæ–‡ä»¶å¤¹æ’å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œé‚£ä¹ˆtmpæ–‡ä»¶å¤¹å°±åˆ é™¤å¤±è´¥äº†ã€‚
å…³é—­ç¨‹åºçš„ä»£ç è°ƒç”¨äº†<code>http://localhost:%http_port/@kill</code>è¿›è¡Œå…³é—­ï¼Œ@killçš„å®ç°æ–¹æ³•åœ¨play.CorePluginä¸‹ï¼Œæ³¨æ„ï¼Œ@killåœ¨prodæ¨¡å¼ä¸‹æ— æ•ˆ (<del>è¿™æ˜¯åºŸè¯</del>)<br>
ç”±äºä½¿ç”¨äº†pythonä½œä¸ºå¯åŠ¨è„šæœ¬ï¼Œæ— æ³•é€šè¿‡javaå†…éƒ¨å˜é‡å€¼åˆ¤æ–­ç¨‹åºæ˜¯å¦å¼€å¯ï¼Œåªèƒ½æŸ¥çœ‹æ§åˆ¶å°çš„è¾“å‡ºæ—¥å¿—ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨testä½œä¸ºidé‡å¯åï¼Œè„šæœ¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç åˆ¤æ–­ç¨‹åºæ˜¯å¦å®Œå…¨å¯åŠ¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#è¿™é‡Œå¯åŠ¨ç¨‹åº</span>
</span></span><span style="display:flex;"><span>    play_process <span style="color:#555">=</span> subprocess<span style="color:#555">.</span>Popen(java_cmd, env<span style="color:#555">=</span>os<span style="color:#555">.</span>environ, stdout<span style="color:#555">=</span>sout)
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">OSError</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#366">print</span> <span style="color:#c30">&#34;Could not execute the java executable, please make sure the JAVA_HOME environment variable is set properly (the java executable should reside at JAVA_HOME/bin/java). &#34;</span>
</span></span><span style="display:flex;"><span>        sys<span style="color:#555">.</span>exit(<span style="color:#555">-</span><span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">#æ‰“å¼€æ—¥å¿—è¾“å‡ºæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>    soutint <span style="color:#555">=</span> <span style="color:#366">open</span>(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(app<span style="color:#555">.</span>log_path(), <span style="color:#c30">&#39;system.out&#39;</span>), <span style="color:#c30">&#39;r&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> <span style="color:#069;font-weight:bold">True</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> play_process<span style="color:#555">.</span>poll():
</span></span><span style="display:flex;"><span>            <span style="color:#366">print</span> <span style="color:#c30">&#34;~&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#366">print</span> <span style="color:#c30">&#34;~ Oops, application has not started?&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#366">print</span> <span style="color:#c30">&#34;~&#34;</span>
</span></span><span style="display:flex;"><span>            sys<span style="color:#555">.</span>exit(<span style="color:#555">-</span><span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>        line <span style="color:#555">=</span> soutint<span style="color:#555">.</span>readline()<span style="color:#555">.</span>strip()
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> line:
</span></span><span style="display:flex;"><span>            <span style="color:#366">print</span> line
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">#è‹¥å‡ºç°&#39;Server is up and running&#39;åˆ™æ­£å¸¸å¯åŠ¨</span>
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> line<span style="color:#555">.</span>find(<span style="color:#c30">&#39;Server is up and running&#39;</span>) <span style="color:#555">&gt;</span> <span style="color:#555">-</span><span style="color:#f60">1</span>: <span style="color:#09f;font-style:italic"># This line is written out by Server.java to system.out and is not log file dependent</span>
</span></span><span style="display:flex;"><span>                soutint<span style="color:#555">.</span>close()
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>
</span></span></code></pre></div><p>FirePhoqueç±»çš„å®ç°è¿‡ç¨‹æˆ‘ä»¬ä¹‹åå†è¯¦è§£ã€‚</p>
<h3 id="newä¸clean">
  newä¸clean
  <a class="heading-link" href="#new%e4%b8%8eclean">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>æˆ‘ä»¬ä½¿ç”¨newæ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œplay newçš„ä½¿ç”¨æ–¹æ³•ä¸º<code>play new project-name [--with] [--name]</code>ã€‚
withå‚æ•°ä¸ºé¡¹ç›®æ‰€ä½¿ç”¨çš„æ¨¡å—ã€‚
nameä¸ºé¡¹ç›®åï¼Œè¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œproject-nameå’Œ&ndash;nameçš„å‚æ•°å¯ä»¥è®¾ç½®ä¸ºä¸åŒå€¼ï¼Œproject-nameæ˜¯é¡¹ç›®å»ºç«‹çš„æ–‡ä»¶å¤¹åï¼Œ&ndash;nameçš„å€¼ä¸ºé¡¹ç›®é…ç½®æ–‡ä»¶ä¸­çš„application.nameã€‚<br>
å¦‚æœä¸åŠ &ndash;nameï¼Œè„šæœ¬ä¼šæç¤ºä½ æ˜¯å¦ä½¿ç”¨project-nameä½œä¸ºåå­—ï¼Œåœ¨ç¡®è®¤ä¹‹åï¼Œè„šæœ¬ä¼šå°†resources/application-skelä¸­çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°{project-name}æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åç”¨è¾“å…¥çš„nameæ›¿æ¢é¡¹ç›®é…ç½®æ–‡ä»¶ä¸‹çš„application.nameï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª64ä½çš„secretKeyæ›¿æ¢é…ç½®æ–‡ä»¶ä¸­çš„secretKeyã€‚<br>
æ¥ç€ï¼Œè„šæœ¬ä¼šæŸ¥æ‰¾ä½¿ç”¨çš„æ¨¡å—ä¸­æ˜¯å¦å­˜åœ¨dependencies.ymlï¼Œå¹¶å°†dependencies.ymlä¸­çš„å†…å®¹åŠ å…¥é¡¹ç›®çš„dependencies.ymlä¸­ï¼Œå¹¶è°ƒç”¨DependenciesManageræ£€æŸ¥ä¾èµ–çŠ¶æ€ã€‚</p>
<p>newå‡½æ•°çš„ä¸»è¦ä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#366">print</span> <span style="color:#c30">&#34;~ The new application will be created in </span><span style="color:#a00">%s</span><span style="color:#c30">&#34;</span> <span style="color:#555">%</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>normpath(app<span style="color:#555">.</span>path)
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> application_name <span style="color:#000;font-weight:bold">is</span> <span style="color:#069;font-weight:bold">None</span>:
</span></span><span style="display:flex;"><span>    application_name <span style="color:#555">=</span> raw_input(<span style="color:#c30">&#34;~ What is the application name? [</span><span style="color:#a00">%s</span><span style="color:#c30">] &#34;</span> <span style="color:#555">%</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>basename(app<span style="color:#555">.</span>path))
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> application_name <span style="color:#555">==</span> <span style="color:#c30">&#34;&#34;</span>:
</span></span><span style="display:flex;"><span>    application_name <span style="color:#555">=</span> os<span style="color:#555">.</span>path<span style="color:#555">.</span>basename(app<span style="color:#555">.</span>path)
</span></span><span style="display:flex;"><span>copy_directory(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(env[<span style="color:#c30">&#34;basedir&#34;</span>], <span style="color:#c30">&#39;resources/application-skel&#39;</span>), app<span style="color:#555">.</span>path)
</span></span><span style="display:flex;"><span>os<span style="color:#555">.</span>mkdir(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(app<span style="color:#555">.</span>path, <span style="color:#c30">&#39;app/models&#39;</span>))
</span></span><span style="display:flex;"><span>os<span style="color:#555">.</span>mkdir(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(app<span style="color:#555">.</span>path, <span style="color:#c30">&#39;lib&#39;</span>))
</span></span><span style="display:flex;"><span>app<span style="color:#555">.</span>check()
</span></span><span style="display:flex;"><span>replaceAll(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(app<span style="color:#555">.</span>path, <span style="color:#c30">&#39;conf/application.conf&#39;</span>), <span style="color:#c30">r</span><span style="color:#c30">&#39;%APPLICATION_NAME%&#39;</span>, application_name)
</span></span><span style="display:flex;"><span>replaceAll(os<span style="color:#555">.</span>path<span style="color:#555">.</span>join(app<span style="color:#555">.</span>path, <span style="color:#c30">&#39;conf/application.conf&#39;</span>), <span style="color:#c30">r</span><span style="color:#c30">&#39;%SECRET_KEY%&#39;</span>, secretKey())
</span></span><span style="display:flex;"><span><span style="color:#366">print</span> <span style="color:#c30">&#34;~&#34;</span>
</span></span></code></pre></div><p>cleanå‘½ä»¤éå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ é™¤æ•´ä¸ªtmpæ–‡ä»¶å¤¹</p>
<h3 id="warä¸precompile">
  warä¸precompile
  <a class="heading-link" href="#war%e4%b8%8eprecompile">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨tomcatç­‰æœåŠ¡å™¨å®¹å™¨ä½œä¸ºæœåŠ¡è½½ä½“ï¼Œè¿™æ—¶å€™å°±éœ€è¦å°†playåº”ç”¨æ‰“åŒ…ä¸ºwar<br>
warçš„ä½¿ç”¨å‚æ•°æ˜¯</p>
<blockquote>
<p>play war project-name [-o/&ndash;output][filename] [&ndash;zip] [&ndash;exclude][exclude-directories]</p>
</blockquote>
<p>ä½¿ç”¨-oæˆ–&ndash;outputæ¥æŒ‡å®šè¾“å‡ºæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨&ndash;zipå‹ç¼©ä¸ºwaræ ¼å¼ï¼Œä½¿ç”¨&ndash;excludeæ¥åŒ…å«å¦å¤–éœ€è¦æ‰“åŒ…çš„æ–‡ä»¶å¤¹<br>
è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»åœ¨é¡¹ç›®ç›®å½•å¤–è¿›è¡Œæ“ä½œï¼Œä¸ç„¶ä¼šå¤±è´¥</p>
<p>åœ¨å‚æ•°å¤„ç†å®Œæ¯•åï¼Œè„šæœ¬æ­£å¼å¼€å§‹æ‰“åŒ…è¿‡ç¨‹ï¼Œåˆ†ä¸º2ä¸ªæ­¥éª¤ï¼š1.é¢„ç¼–è¯‘ã€‚2ï¼šæ‰“åŒ…</p>
<p>é¢„ç¼–è¯‘å³ç”¨åˆ°äº†precompileå‘½ä»¤ï¼Œprecompileå‘½ä»¤ä¸runå‘½ä»¤å‡ ä¹ä¸€æ ·ï¼Œåªæ˜¯åœ¨javaå‚æ•°ä¸­åŠ å…¥äº†<code>precompile=yes</code><br>
è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åŠ å…¥äº†è¿™ä¸ªjavaå‚æ•°å¯¹ç¨‹åºçš„å½±å“ã€‚
ä¸é¢„ç¼–è¯‘æœ‰å…³çš„ä»£ç ä¸»è¦æ˜¯ä¸‹é¢2æ®µï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#078;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#c0f">preCompile</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(usePrecompiled)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(Play.<span style="color:#309">getFile</span>(<span style="color:#c30">&#34;precompiled&#34;</span>).<span style="color:#309">exists</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>classloader.<span style="color:#309">getAllClasses</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Logger.<span style="color:#309">info</span>(<span style="color:#c30">&#34;Application is precompiled&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#069;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Logger.<span style="color:#309">error</span>(<span style="color:#c30">&#34;Precompiled classes are missing!!&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>fatalServerErrorOccurred();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#09f;font-style:italic">//è¿™é‡Œå¼€å§‹é¢„ç¼–è¯‘</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#069;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Logger.<span style="color:#309">info</span>(<span style="color:#c30">&#34;Precompiling ...&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Thread.<span style="color:#309">currentThread</span>().<span style="color:#309">setContextClassLoader</span>(Play.<span style="color:#309">classloader</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#078;font-weight:bold">long</span><span style="color:#bbb"> </span>start<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span>System.<span style="color:#309">currentTimeMillis</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">//getAllClassesæ–¹æ³•è¾ƒé•¿ï¼Œå°±ä¸è´´äº†ï¼Œä¸‹é¢ä¸€æ®µä»£ç åœ¨getAllClassesæ–¹æ³•ä¸­è¿›å…¥</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>classloader.<span style="color:#309">getAllClasses</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(Logger.<span style="color:#309">isTraceEnabled</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Logger.<span style="color:#309">trace</span>(<span style="color:#c30">&#34;%sms to precompile the Java stuff&#34;</span>,<span style="color:#bbb"> </span>System.<span style="color:#309">currentTimeMillis</span>()<span style="color:#bbb"> </span><span style="color:#555">-</span><span style="color:#bbb"> </span>start);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(<span style="color:#555">!</span>lazyLoadTemplates)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>start<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span>System.<span style="color:#309">currentTimeMillis</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#09f;font-style:italic">//ç¼–è¯‘æ¨¡æ¿</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>TemplateLoader.<span style="color:#309">getAllTemplate</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(Logger.<span style="color:#309">isTraceEnabled</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>Logger.<span style="color:#309">trace</span>(<span style="color:#c30">&#34;%sms to precompile the templates&#34;</span>,<span style="color:#bbb"> </span>System.<span style="color:#309">currentTimeMillis</span>()<span style="color:#bbb"> </span><span style="color:#555">-</span><span style="color:#bbb"> </span>start);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">catch</span><span style="color:#bbb"> </span>(Throwable<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Logger.<span style="color:#309">error</span>(e,<span style="color:#bbb"> </span><span style="color:#c30">&#34;Cannot start in PROD mode with errors&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>fatalServerErrorOccurred();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#078;font-weight:bold">byte</span><span style="color:#555">[]</span><span style="color:#bbb"> </span><span style="color:#c0f">enhance</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#069;font-weight:bold">this</span>.<span style="color:#309">enhancedByteCode</span><span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">this</span>.<span style="color:#309">javaByteCode</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(isClass())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">// before we can start enhancing this class we must make sure it is not a PlayPlugin.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">// PlayPlugins can be included as regular java files in a Play-application.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">// If a PlayPlugin is present in the application, it is loaded when other plugins are loaded.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">// All plugins must be loaded before we can start enhancing.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">// This is a problem when loading PlayPlugins bundled as regular app-class since it uses the same classloader</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#09f;font-style:italic">// as the other (soon to be) enhanched play-app-classes.</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#078;font-weight:bold">boolean</span><span style="color:#bbb"> </span>shouldEnhance<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>CtClass<span style="color:#bbb"> </span>ctClass<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span>enhanceChecker_classPool.<span style="color:#309">makeClass</span>(<span style="color:#069;font-weight:bold">new</span><span style="color:#bbb"> </span>ByteArrayInputStream(<span style="color:#069;font-weight:bold">this</span>.<span style="color:#309">enhancedByteCode</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(ctClass.<span style="color:#309">subclassOf</span>(ctPlayPluginClass))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>shouldEnhance<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">false</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">catch</span>(<span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#09f;font-style:italic">// nop</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(shouldEnhance)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Play.<span style="color:#309">pluginCollection</span>.<span style="color:#309">enhance</span>(<span style="color:#069;font-weight:bold">this</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#09f;font-style:italic">//ä¸»è¦æ˜¯è¿™ä¸€æ®µï¼Œä»–å°†å¢å¼ºå¤„ç†åçš„å­—èŠ‚ç å†™å…¥äº†æ–‡ä»¶ï¼Œå¢å¼ºå¤„ç†åœ¨ä¹‹åä¼šæ·±å…¥å±•å¼€</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#069;font-weight:bold">if</span><span style="color:#bbb"> </span>(System.<span style="color:#309">getProperty</span>(<span style="color:#c30">&#34;precompile&#34;</span>)<span style="color:#bbb"> </span><span style="color:#555">!=</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#069;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#09f;font-style:italic">// emit bytecode to standard class layout as well</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>File<span style="color:#bbb"> </span>f<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span>Play.<span style="color:#309">getFile</span>(<span style="color:#c30">&#34;precompiled/java/&#34;</span><span style="color:#bbb"> </span><span style="color:#555">+</span><span style="color:#bbb"> </span>(name.<span style="color:#309">replace</span>(<span style="color:#c30">&#34;.&#34;</span>,<span style="color:#bbb"> </span><span style="color:#c30">&#34;/&#34;</span>))<span style="color:#bbb"> </span><span style="color:#555">+</span><span style="color:#bbb"> </span><span style="color:#c30">&#34;.class&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>f.<span style="color:#309">getParentFile</span>().<span style="color:#309">mkdirs</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>FileOutputStream<span style="color:#bbb"> </span>fos<span style="color:#bbb"> </span><span style="color:#555">=</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">new</span><span style="color:#bbb"> </span>FileOutputStream(f);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>fos.<span style="color:#309">write</span>(<span style="color:#069;font-weight:bold">this</span>.<span style="color:#309">enhancedByteCode</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>fos.<span style="color:#309">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">catch</span><span style="color:#bbb"> </span>(Exception<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>e.<span style="color:#309">printStackTrace</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#069;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#069;font-weight:bold">this</span>.<span style="color:#309">enhancedByteCode</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>é¢„ç¼–è¯‘è¿‡ç¨‹ç»“æŸåï¼Œè„šæœ¬æ­£å¼å¼€å§‹æ‰“åŒ…è¿‡ç¨‹ï¼Œæ‰“åŒ…è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯è®²é¢„ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ã€æ¨¡æ¿æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€ä½¿ç”¨çš„ç±»åº“ã€ä½¿ç”¨çš„æ¨¡å—ç±»åº“ç­‰ç§»åŠ¨è‡³WEB-INFæ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœä½¿ç”¨äº†&ndash;zipï¼Œé‚£ä¹ˆè„šæœ¬ä¼šå°†ç”Ÿæˆçš„æ–‡ä»¶å¤¹ç”¨zipæ ¼å¼æ‰“åŒ…ã€‚</p>
<h3 id="secretå’Œstatus">
  secretå’Œstatus
  <a class="heading-link" href="#secret%e5%92%8cstatus">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>secretå‘½ä»¤èƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„secret key
statuså‘½ä»¤æ˜¯ç”¨äºå®æ—¶æ˜¾ç¤ºç¨‹åºçš„è¿è¡ŒçŠ¶æ€ï¼Œè„šæœ¬çš„è¿ä½œååˆ†ç®€å•ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ£€æŸ¥æ˜¯å¦æœ‰&ndash;urlå‚æ•°ï¼Œæœ‰åˆ™åœ¨ä»–ä¹‹åæ·»åŠ @status</li>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨&ndash;secret</li>
<li>å¦‚æœæ²¡æœ‰&ndash;urlï¼Œåˆ™ä½¿ç”¨<code>http://localhost:%http_port/@status</code>;å¦‚æœæ²¡æœ‰ &ndash;secretï¼Œåˆ™ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–secret key</li>
<li>å°†secret_keyã€&rsquo;@status&rsquo;ä½¿ç”¨shaåŠ å¯†ï¼Œå¹¶åŠ å…¥Authorizationè¯·æ±‚å¤´</li>
<li>å‘é€è¯·æ±‚</li>
</ol>
<p>@statusçš„å®ç°å’Œ@killä¸€æ ·åœ¨CorePluginç±»ä¸­ï¼Œè¿™åœ¨ä¹‹åå†è¿›è¡Œè¯¦è§£ã€‚</p>
<h1 id="æ€»ç»“">
  æ€»ç»“
  <a class="heading-link" href="#%e6%80%bb%e7%bb%93">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Playçš„å¯åŠ¨è„šæœ¬åˆ†æè‡³æ­¤å°±ç»“æŸäº†ï¼Œä»è„šæœ¬çš„åˆ†æè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥ç¨å¾®æ¢ç©¶ä¸‹Playåœ¨è„šæœ¬å¯åŠ¨é˜¶æ®µæœ‰ä½•è¡Œä¸ºï¼Œè¿™å¯¹æˆ‘ä»¬è¿›è¡Œè„šæœ¬æ”¹é€ æˆ–è€…å¯åŠ¨ä¼˜åŒ–è¿˜æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚
ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Playçš„å¯åŠ¨ç±»æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚ã€‚</p>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
    2024
    
    Â·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
